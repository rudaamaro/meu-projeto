:root {
  --z-bg: 0;
  --z-content: 10;
  --z-hud: 20;
  --z-fab: 30;
  --z-menu: 40;
  --z-toast: 50;

  --safe-top: env(safe-area-inset-top);
  --safe-right: env(safe-area-inset-right);
  --safe-bottom: env(safe-area-inset-bottom);
  --safe-left: env(safe-area-inset-left);
}

html, body {
  margin: 0;
  padding: 0;
  height: 100%;
  background: #0b0f14;
  font-family: system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, sans-serif;
  overscroll-behavior-y: contain;
  overflow: hidden;
}

canvas {
  display: block;
  width: 100vw;
  height: 100vh;
  touch-action: manipulation;
  position: fixed;
  inset: 0;
  z-index: var(--z-bg);
}

#ui-layer {
  position: fixed;
  inset: 0;
  padding: var(--safe-top) var(--safe-right) var(--safe-bottom) var(--safe-left);
  z-index: var(--z-content);
  pointer-events: none;
}

.mobile-input {
  position: fixed;
  left: -9999px;
  top: -9999px;
  width: 1px;
  height: 1px;
  opacity: 0.02;
  background: transparent;
  color: transparent;
  caret-color: #7ee7f3;
  border: 0;
  outline: 0;
  z-index: var(--z-menu);
  pointer-events: auto;
}

/* Generic overlay layers */
.hud { position: absolute; z-index: var(--z-hud); pointer-events: none; }
.fab { position: fixed; z-index: var(--z-fab); pointer-events: auto; right: calc(16px + var(--safe-right)); bottom: calc(16px + var(--safe-bottom)); }
.menu-backdrop { position: fixed; inset: 0; background: rgba(0,0,0,0.5); z-index: var(--z-menu); display: flex; align-items: center; justify-content: center; pointer-events: auto; }
.menu { background: #1f2937; border-radius: 12px; width: min(92vw, 640px); max-width: 100%; padding: 16px; display: flex; flex-direction: column; gap: 8px; }
.menu button { width: 100%; }
.snackbar { position: fixed; left: 50%; transform: translateX(-50%); bottom: calc(var(--safe-bottom) + 72px); z-index: var(--z-toast); pointer-events: auto; }

@media (min-width: 481px) and (max-width: 1024px) {
  .menu { width: 480px; }
}

@media (min-width: 1025px) {
  .menu { width: 480px; }
}

/* Em telas muito estreitas, comprimimos os botões do topo */
@media (max-width: 420px) {
  :root {
    --top-btn-w: 84px;   /* usado no layout.js via fallback numérico */
    --top-btn-h: 34px;
  }
}

